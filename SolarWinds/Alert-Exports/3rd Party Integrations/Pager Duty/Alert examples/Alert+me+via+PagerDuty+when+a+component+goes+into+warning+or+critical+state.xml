<AlertDefinition xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Models"><AlertID>119</AlertID><AlertMessage>Alert me when a component goes into warning or critical state</AlertMessage><AlertRefID>c0e5a7fd-dd6b-43bd-ad6c-38ae101ee0bb</AlertRefID><Canned>false</Canned><Category /><CreatedBy>admin</CreatedBy><CustomProperties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /><Description>This alert will trigger an incident in PagerDuty when a component goes into warning or critical state and resolve it when a component comes back up.</Description><Enabled>true</Enabled><ExecutionTimePeriods xmlns:d2p1="http://schemas.solarwinds.com/2008/Core" /><Frequency>PT1M</Frequency><LastEdit>2019-05-09T12:30:05.9Z</LastEdit><Name>Alert me via PagerDuty when a component goes into warning or critical state</Name><NotificationEnabled>false</NotificationEnabled><NotificationSettings xmlns:d2p1="http://schemas.solarwinds.com/2008/Core"><d2p1:Enabled>false</d2p1:Enabled><d2p1:NetObjectType>APM: Component</d2p1:NetObjectType><d2p1:Severity>Notice</d2p1:Severity><d2p1:Subject /><d2p1:_properties xmlns:d3p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"><d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:Key>Component Name</d3p1:Key><d3p1:Value><d2p1:Name>Component Name</d2p1:Name><d2p1:Value>${ComponentName}</d2p1:Value></d3p1:Value></d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:Key>Component Type Name</d3p1:Key><d3p1:Value><d2p1:Name>Component Type Name</d2p1:Name><d2p1:Value>${DisplayType}</d2p1:Value></d3p1:Value></d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:Key>Component Status</d3p1:Key><d3p1:Value><d2p1:Name>Component Status</d2p1:Name><d2p1:Value>${ComponentStatus}</d2p1:Value></d3p1:Value></d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:Key>Statistic Data</d3p1:Key><d3p1:Value><d2p1:Name>Statistic Data</d2p1:Name><d2p1:Value>${StatisticData}</d2p1:Value></d3p1:Value></d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:Key>Component Message</d3p1:Key><d3p1:Value><d2p1:Name>Component Message</d2p1:Name><d2p1:Value>${ComponentMessage}</d2p1:Value></d3p1:Value></d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt></d2p1:_properties></NotificationSettings><ObjectType>APM: Component</ObjectType><Reset><Conditions><ConditionChainItem><AndThenTimeInterval i:nil="true" /><ChainType>ResetInverseToTrigger</ChainType><Condition xmlns:d5p1="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Models.Alerting" i:nil="true" /><ConjunctionOperator>None</ConjunctionOperator><IsInvertedMinCountThreshold>false</IsInvertedMinCountThreshold><NetObjectsMinCountThreshold i:nil="true" /><ObjectType i:nil="true" /><SustainTime i:nil="true" /><Type i:nil="true" /></ConditionChainItem></Conditions></Reset><ResetActions xmlns:d2p1="http://schemas.solarwinds.com/2008/Orion"><d2p1:ActionDefinition><d2p1:ActionProperties><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionIfAknowledge</d2p1:PropertyName><d2p1:PropertyValue>False</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionRepeatTimeSpan</d2p1:PropertyName><d2p1:PropertyValue>0</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestBody</d2p1:PropertyName><d2p1:PropertyValue>{
  "payload": {
    "summary": "Component ${N=SwisEntity;M=ComponentAlert.ComponentName} (${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName} on ${N=SwisEntity;M=Application.Node.Caption}) is ${N=SwisEntity;M=ComponentAlert.ComponentAvailability}",
    "source": "${N=SwisEntity;M=ComponentAlert.ComponentName}",
    "severity": "critical",
    "component": "${N=SwisEntity;M=ComponentAlert.ComponentName}"
  },
  "routing_key": "${SQL: SELECT Nodes.PDIntegrationKey FROM Nodes WHERE NodeID='${NodeID}'}",
  "dedup_key": "${N=SwisEntity;M=ComponentAlert.ComponentName}_${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName}_${N=SwisEntity;M=Application.Node.Caption}_state",
  "event_action": "resolve"
}</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestMethod</d2p1:PropertyName><d2p1:PropertyValue>2</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestUrl</d2p1:PropertyName><d2p1:PropertyValue>https://events.pagerduty.com/v2/enqueue</d2p1:PropertyValue></d2p1:ActionProperty></d2p1:ActionProperties><d2p1:ActionTypeID>SendHttpRequest</d2p1:ActionTypeID><d2p1:Description>Post to https://events.pagerduty.com/v2/enqueue</d2p1:Description><d2p1:Enabled>true</d2p1:Enabled><d2p1:ID>230</d2p1:ID><d2p1:IconPath i:nil="true" /><d2p1:IsShared>false</d2p1:IsShared><d2p1:Order>1</d2p1:Order><d2p1:TimePeriods xmlns:d4p1="http://schemas.solarwinds.com/2008/Core" /><d2p1:Title>Resolve via POST</d2p1:Title><d2p1:TransitiveID i:nil="true" /></d2p1:ActionDefinition></ResetActions><Severity>Critical</Severity><Trigger><Conditions><ConditionChainItem><AndThenTimeInterval i:nil="true" /><ChainType>Trigger</ChainType><Condition xmlns:d5p1="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Models.Alerting" xmlns:d5p2="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Plugins.Conditions.Dynamic" i:type="d5p2:AlertConditionDynamic"><d5p2:ExprTree><d5p1:Child><d5p1:Expr><d5p1:Child><d5p1:Expr><d5p1:Child /><d5p1:NodeType>Field</d5p1:NodeType><d5p1:Value>Orion.Nodes|Status|Application.Node</d5p1:Value></d5p1:Expr><d5p1:Expr><d5p1:Child /><d5p1:NodeType>Constant</d5p1:NodeType><d5p1:Value>2</d5p1:Value></d5p1:Expr></d5p1:Child><d5p1:NodeType>Operator</d5p1:NodeType><d5p1:Value>!=</d5p1:Value></d5p1:Expr><d5p1:Expr><d5p1:Child><d5p1:Expr><d5p1:Child><d5p1:Expr><d5p1:Child /><d5p1:NodeType>Field</d5p1:NodeType><d5p1:Value>Orion.APM.ComponentAlert|ComponentAvailability|ComponentAlert</d5p1:Value></d5p1:Expr><d5p1:Expr><d5p1:Child /><d5p1:NodeType>Constant</d5p1:NodeType><d5p1:Value>Critical</d5p1:Value></d5p1:Expr></d5p1:Child><d5p1:NodeType>Operator</d5p1:NodeType><d5p1:Value>=</d5p1:Value></d5p1:Expr><d5p1:Expr><d5p1:Child><d5p1:Expr><d5p1:Child /><d5p1:NodeType>Field</d5p1:NodeType><d5p1:Value>Orion.APM.ComponentAlert|ComponentAvailability|ComponentAlert</d5p1:Value></d5p1:Expr><d5p1:Expr><d5p1:Child /><d5p1:NodeType>Constant</d5p1:NodeType><d5p1:Value>Warning</d5p1:Value></d5p1:Expr></d5p1:Child><d5p1:NodeType>Operator</d5p1:NodeType><d5p1:Value>=</d5p1:Value></d5p1:Expr></d5p1:Child><d5p1:NodeType>Operator</d5p1:NodeType><d5p1:Value>OR</d5p1:Value></d5p1:Expr></d5p1:Child><d5p1:NodeType>Operator</d5p1:NodeType><d5p1:Value>AND</d5p1:Value></d5p2:ExprTree><d5p2:Scope i:nil="true" /><d5p2:TimeWindow i:nil="true" /></Condition><ConjunctionOperator>None</ConjunctionOperator><IsInvertedMinCountThreshold>false</IsInvertedMinCountThreshold><NetObjectsMinCountThreshold i:nil="true" /><ObjectType>APM: Component</ObjectType><SustainTime i:nil="true" /><Type xmlns:d5p1="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Plugins.Conditions.Dynamic" i:type="d5p1:ConditionTypeDynamic" /></ConditionChainItem></Conditions></Trigger><TriggerActions xmlns:d2p1="http://schemas.solarwinds.com/2008/Orion"><d2p1:ActionDefinition><d2p1:ActionProperties><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>EscalationLevel</d2p1:PropertyName><d2p1:PropertyValue>0</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionIfAknowledge</d2p1:PropertyName><d2p1:PropertyValue>True</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionRepeatTimeSpan</d2p1:PropertyName><d2p1:PropertyValue>0</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestBody</d2p1:PropertyName><d2p1:PropertyValue>{
  "payload": {
    "summary": "Component ${N=SwisEntity;M=ComponentAlert.ComponentName} (${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName} on ${N=SwisEntity;M=Application.Node.Caption}) is ${N=SwisEntity;M=ComponentAlert.ComponentAvailability}",
    "source": "${N=SwisEntity;M=ComponentAlert.ComponentName}",
    "severity": "critical",
    "component": "${N=SwisEntity;M=ComponentAlert.ComponentName}",
  "custom_details": {
      "Application Name": "${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName}",
      "Node": "${N=SwisEntity;M=Application.Node.Caption}",
      "Component Availability": "${N=SwisEntity;M=ComponentAlert.ComponentAvailability}",
      "Alert Object ID": "${N=Alerting;M=AlertObjectID}"
    }


  },
  "routing_key": "${SQL: SELECT Nodes.PDIntegrationKey FROM Nodes WHERE NodeID='${NodeID}'}",
   "dedup_key": "${N=SwisEntity;M=ComponentAlert.ComponentName}_${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName}_${N=SwisEntity;M=Application.Node.Caption}_state",
  "event_action": "trigger",
  "client": "SolarWinds Orion",
  "client_url": "${N=SwisEntity;M=DetailsUrl}"

}</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestMethod</d2p1:PropertyName><d2p1:PropertyValue>2</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestUrl</d2p1:PropertyName><d2p1:PropertyValue>https://events.pagerduty.com/v2/enqueue</d2p1:PropertyValue></d2p1:ActionProperty></d2p1:ActionProperties><d2p1:ActionTypeID>SendHttpRequest</d2p1:ActionTypeID><d2p1:Description>Post to https://events.pagerduty.com/v2/enqueue</d2p1:Description><d2p1:Enabled>true</d2p1:Enabled><d2p1:ID>227</d2p1:ID><d2p1:IconPath i:nil="true" /><d2p1:IsShared>false</d2p1:IsShared><d2p1:Order>1</d2p1:Order><d2p1:TimePeriods xmlns:d4p1="http://schemas.solarwinds.com/2008/Core" /><d2p1:Title>Trigger</d2p1:Title><d2p1:TransitiveID i:nil="true" /></d2p1:ActionDefinition></TriggerActions><Uri>swis://server-name.example-orion-server.com/Orion/Orion.AlertConfigurations/AlertID=119</Uri></AlertDefinition>