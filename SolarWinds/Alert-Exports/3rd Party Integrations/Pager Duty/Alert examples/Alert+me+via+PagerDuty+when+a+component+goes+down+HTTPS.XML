<AlertDefinition xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Models"><AlertID>125</AlertID><AlertMessage>Alert me when a component goes down</AlertMessage><AlertRefID>b9c6077a-e7ca-47f6-8c79-880bedd61633</AlertRefID><Canned>false</Canned><Category /><CreatedBy>admin</CreatedBy><CustomProperties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /><Description>This alert will trigger an incident in PagerDuty when a component goes down and resolve it when the component comes back up.</Description><Enabled>true</Enabled><ExecutionTimePeriods xmlns:d2p1="http://schemas.solarwinds.com/2008/Core" /><Frequency>PT1M</Frequency><LastEdit>2019-05-08T13:56:36.9033333Z</LastEdit><Name>Alert me via PagerDuty when a component goes down HTTPS</Name><NotificationEnabled>false</NotificationEnabled><NotificationSettings xmlns:d2p1="http://schemas.solarwinds.com/2008/Core"><d2p1:Enabled>false</d2p1:Enabled><d2p1:NetObjectType>APM: Component</d2p1:NetObjectType><d2p1:Severity>Notice</d2p1:Severity><d2p1:Subject /><d2p1:_properties xmlns:d3p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"><d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:Key>Component Name</d3p1:Key><d3p1:Value><d2p1:Name>Component Name</d2p1:Name><d2p1:Value>${ComponentName}</d2p1:Value></d3p1:Value></d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:Key>Component Type Name</d3p1:Key><d3p1:Value><d2p1:Name>Component Type Name</d2p1:Name><d2p1:Value>${DisplayType}</d2p1:Value></d3p1:Value></d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:Key>Component Status</d3p1:Key><d3p1:Value><d2p1:Name>Component Status</d2p1:Name><d2p1:Value>${ComponentStatus}</d2p1:Value></d3p1:Value></d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:Key>Statistic Data</d3p1:Key><d3p1:Value><d2p1:Name>Statistic Data</d2p1:Name><d2p1:Value>${StatisticData}</d2p1:Value></d3p1:Value></d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt><d3p1:Key>Component Message</d3p1:Key><d3p1:Value><d2p1:Name>Component Message</d2p1:Name><d2p1:Value>${ComponentMessage}</d2p1:Value></d3p1:Value></d3p1:KeyValueOfstringAlertNotificationProperty9sQWCBBt></d2p1:_properties></NotificationSettings><ObjectType>APM: Component</ObjectType><Reset><Conditions><ConditionChainItem><AndThenTimeInterval i:nil="true" /><ChainType>ResetInverseToTrigger</ChainType><Condition xmlns:d5p1="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Models.Alerting" i:nil="true" /><ConjunctionOperator>None</ConjunctionOperator><IsInvertedMinCountThreshold>false</IsInvertedMinCountThreshold><NetObjectsMinCountThreshold i:nil="true" /><ObjectType i:nil="true" /><SustainTime i:nil="true" /><Type i:nil="true" /></ConditionChainItem></Conditions></Reset><ResetActions xmlns:d2p1="http://schemas.solarwinds.com/2008/Orion"><d2p1:ActionDefinition><d2p1:ActionProperties><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionIfAknowledge</d2p1:PropertyName><d2p1:PropertyValue>False</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionRepeatTimeSpan</d2p1:PropertyName><d2p1:PropertyValue>0</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>FilePath</d2p1:PropertyName><d2p1:PropertyValue>C:\PagerDuty\Queue\${N=SwisEntity;M=ComponentAlert.ComponentName}_Recovery_${N=Generic;M=S}.txt</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>FileSizeMb</d2p1:PropertyName><d2p1:PropertyValue>0</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>Message</d2p1:PropertyName><d2p1:PropertyValue>{
	"service_key": "${SQL: SELECT Nodes.PDIntegrationKey FROM Nodes WHERE NodeID='${NodeID}'}",
	"incident_key": "${N=SwisEntity;M=ComponentAlert.ComponentName} (${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName} on ${N=SwisEntity;M=Application.Node.Caption})",
	"event_type": "resolve",
	"description": "Component ${N=SwisEntity;M=ComponentAlert.ComponentName} (${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName} on ${N=SwisEntity;M=Application.Node.Caption}) is ${N=SwisEntity;M=ComponentAlert.ComponentAvailability}"
}</d2p1:PropertyValue></d2p1:ActionProperty></d2p1:ActionProperties><d2p1:ActionTypeID>WriteToFile</d2p1:ActionTypeID><d2p1:Description>Logs the Alert to a text file</d2p1:Description><d2p1:Enabled>true</d2p1:Enabled><d2p1:ID>221</d2p1:ID><d2p1:IconPath i:nil="true" /><d2p1:IsShared>false</d2p1:IsShared><d2p1:Order>1</d2p1:Order><d2p1:TimePeriods xmlns:d4p1="http://schemas.solarwinds.com/2008/Core" /><d2p1:Title>Copy of Log Recovery to PagerDuty Queue</d2p1:Title><d2p1:TransitiveID i:nil="true" /></d2p1:ActionDefinition><d2p1:ActionDefinition><d2p1:ActionProperties><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>Credentials</d2p1:PropertyName><d2p1:PropertyValue /></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionIfAknowledge</d2p1:PropertyName><d2p1:PropertyValue>False</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionRepeatTimeSpan</d2p1:PropertyName><d2p1:PropertyValue>0</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>FilePath</d2p1:PropertyName><d2p1:PropertyValue>"C:\PagerDuty\PagerDuty.vbs"</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>Interpreter</d2p1:PropertyName><d2p1:PropertyValue>CScript.exe</d2p1:PropertyValue></d2p1:ActionProperty></d2p1:ActionProperties><d2p1:ActionTypeID>ExecuteVBScript</d2p1:ActionTypeID><d2p1:Description>Execute a VB Script file when the Alert is Triggered or Reset</d2p1:Description><d2p1:Enabled>true</d2p1:Enabled><d2p1:ID>222</d2p1:ID><d2p1:IconPath i:nil="true" /><d2p1:IsShared>false</d2p1:IsShared><d2p1:Order>2</d2p1:Order><d2p1:TimePeriods xmlns:d4p1="http://schemas.solarwinds.com/2008/Core" /><d2p1:Title>Copy of Execute PagerDuty VBScript</d2p1:Title><d2p1:TransitiveID i:nil="true" /></d2p1:ActionDefinition><d2p1:ActionDefinition><d2p1:ActionProperties><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionIfAknowledge</d2p1:PropertyName><d2p1:PropertyValue>False</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionRepeatTimeSpan</d2p1:PropertyName><d2p1:PropertyValue>0</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestBody</d2p1:PropertyName><d2p1:PropertyValue>{
  "routing_key": "${SQL: SELECT Nodes.PDIntegrationKey FROM Nodes WHERE NodeID='${NodeID}'}",
  "dedup_key": "${N=SwisEntity;M=ComponentAlert.ComponentName}_${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName}_${N=SwisEntity;M=Application.Node.Caption}",
  "event_action": "resolve",
  "payload": {
    "summary": "Component ${N=SwisEntity;M=ComponentAlert.ComponentName} (${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName} on ${N=SwisEntity;M=Application.Node.Caption}) is ${N=SwisEntity;M=ComponentAlert.ComponentAvailability}",
    "source": "${N=SwisEntity;M=ComponentAlert.ComponentName}",
    "severity": "critical",
    "component": "${N=SwisEntity;M=ComponentAlert.ComponentName}",
    "custom_details": {
      "Application Name": "${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName}",
      "Node": "${N=SwisEntity;M=Application.Node.Caption}",
      "Component Availability": "${N=SwisEntity;M=ComponentAlert.ComponentAvailability}"
    }
  }
}</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestMethod</d2p1:PropertyName><d2p1:PropertyValue>2</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestUrl</d2p1:PropertyName><d2p1:PropertyValue>https://events.pagerduty.com/v2/enqueue</d2p1:PropertyValue></d2p1:ActionProperty></d2p1:ActionProperties><d2p1:ActionTypeID>SendHttpRequest</d2p1:ActionTypeID><d2p1:Description>Post to https://events.pagerduty.com/v2/enqueue</d2p1:Description><d2p1:Enabled>true</d2p1:Enabled><d2p1:ID>225</d2p1:ID><d2p1:IconPath i:nil="true" /><d2p1:IsShared>false</d2p1:IsShared><d2p1:Order>3</d2p1:Order><d2p1:TimePeriods xmlns:d4p1="http://schemas.solarwinds.com/2008/Core" /><d2p1:Title>Recovery sent via POST</d2p1:Title><d2p1:TransitiveID i:nil="true" /></d2p1:ActionDefinition></ResetActions><Severity>Critical</Severity><Trigger><Conditions><ConditionChainItem><AndThenTimeInterval i:nil="true" /><ChainType>Trigger</ChainType><Condition xmlns:d5p1="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Models.Alerting" xmlns:d5p2="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Plugins.Conditions.Dynamic" i:type="d5p2:AlertConditionDynamic"><d5p2:ExprTree><d5p1:Child><d5p1:Expr><d5p1:Child><d5p1:Expr><d5p1:Child /><d5p1:NodeType>Field</d5p1:NodeType><d5p1:Value>Orion.Nodes|Status|Application.Node</d5p1:Value></d5p1:Expr><d5p1:Expr><d5p1:Child /><d5p1:NodeType>Constant</d5p1:NodeType><d5p1:Value>2</d5p1:Value></d5p1:Expr></d5p1:Child><d5p1:NodeType>Operator</d5p1:NodeType><d5p1:Value>!=</d5p1:Value></d5p1:Expr><d5p1:Expr><d5p1:Child><d5p1:Expr><d5p1:Child /><d5p1:NodeType>Field</d5p1:NodeType><d5p1:Value>Orion.APM.ComponentAlert|ComponentAvailability|ComponentAlert</d5p1:Value></d5p1:Expr><d5p1:Expr><d5p1:Child /><d5p1:NodeType>Constant</d5p1:NodeType><d5p1:Value>Down</d5p1:Value></d5p1:Expr></d5p1:Child><d5p1:NodeType>Operator</d5p1:NodeType><d5p1:Value>=</d5p1:Value></d5p1:Expr></d5p1:Child><d5p1:NodeType>Operator</d5p1:NodeType><d5p1:Value>AND</d5p1:Value></d5p2:ExprTree><d5p2:Scope i:nil="true" /><d5p2:TimeWindow i:nil="true" /></Condition><ConjunctionOperator>None</ConjunctionOperator><IsInvertedMinCountThreshold>false</IsInvertedMinCountThreshold><NetObjectsMinCountThreshold i:nil="true" /><ObjectType>APM: Component</ObjectType><SustainTime i:nil="true" /><Type xmlns:d5p1="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Plugins.Conditions.Dynamic" i:type="d5p1:ConditionTypeDynamic" /></ConditionChainItem></Conditions></Trigger><TriggerActions xmlns:d2p1="http://schemas.solarwinds.com/2008/Orion"><d2p1:ActionDefinition><d2p1:ActionProperties><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>EscalationLevel</d2p1:PropertyName><d2p1:PropertyValue>0</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionIfAknowledge</d2p1:PropertyName><d2p1:PropertyValue>True</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>executionRepeatTimeSpan</d2p1:PropertyName><d2p1:PropertyValue>0</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestBody</d2p1:PropertyName><d2p1:PropertyValue>{
  "payload": {
    "summary": "Component ${N=SwisEntity;M=ComponentAlert.ComponentName} (${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName} on ${N=SwisEntity;M=Application.Node.Caption}) is ${N=SwisEntity;M=ComponentAlert.ComponentAvailability}",
    "source": "${N=SwisEntity;M=ComponentAlert.ComponentName}",
    "severity": "critical",
    "component": "${N=SwisEntity;M=ComponentAlert.ComponentName}",
    "custom_details": {
      "Application Name": "${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName}",
      "Node": "${N=SwisEntity;M=Application.Node.Caption}",
      "Component Availability": "${N=SwisEntity;M=ComponentAlert.ComponentAvailability}"
    }
  },
  "routing_key": "${SQL: SELECT Nodes.PDIntegrationKey FROM Nodes WHERE NodeID='${NodeID}'}",
  "dedup_key": "${N=SwisEntity;M=ComponentAlert.ComponentName}_${N=SwisEntity;M=Application.ApplicationAlert.ApplicationName}_${N=SwisEntity;M=Application.Node.Caption}",
  "event_action": "trigger",
  "client": "SolarWinds Orion",
  "client_url": "${N=SwisEntity;M=DetailsUrl}"
}</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestMethod</d2p1:PropertyName><d2p1:PropertyValue>2</d2p1:PropertyValue></d2p1:ActionProperty><d2p1:ActionProperty><d2p1:IsShared>false</d2p1:IsShared><d2p1:PropertyName>HttpRequestUrl</d2p1:PropertyName><d2p1:PropertyValue>https://events.pagerduty.com/v2/enqueue</d2p1:PropertyValue></d2p1:ActionProperty></d2p1:ActionProperties><d2p1:ActionTypeID>SendHttpRequest</d2p1:ActionTypeID><d2p1:Description>Post to https://events.pagerduty.com/v2/enqueue</d2p1:Description><d2p1:Enabled>true</d2p1:Enabled><d2p1:ID>226</d2p1:ID><d2p1:IconPath i:nil="true" /><d2p1:IsShared>false</d2p1:IsShared><d2p1:Order>1</d2p1:Order><d2p1:TimePeriods xmlns:d4p1="http://schemas.solarwinds.com/2008/Core" /><d2p1:Title>Send alert via POST</d2p1:Title><d2p1:TransitiveID i:nil="true" /></d2p1:ActionDefinition></TriggerActions><Uri>swis://server-name.example-orion-server.com/Orion/Orion.AlertConfigurations/AlertID=125</Uri></AlertDefinition>